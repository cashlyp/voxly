# --- API Environment --------------------------
# Primary call provider (twilio | aws | vonage)
CALL_PROVIDER=twilio

# API secret (shared for admin + HMAC signing)
API_SECRET=change-me
# Legacy envs (optional)
# ADMIN_API_TOKEN=
# API_HMAC_SECRET=
API_HMAC_MAX_SKEW_MS=300000

# Twilio credentials (required when CALL_PROVIDER=twilio)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
FROM_NUMBER=
TWILIO_GATHER_FALLBACK=true
TWILIO_WEBHOOK_VALIDATION=warn

# Stream auth for WebSocket connections
STREAM_AUTH_SECRET=
STREAM_AUTH_MAX_SKEW_MS=300000

# AWS Connect stack (required when CALL_PROVIDER=aws)
AWS_REGION=us-east-1
AWS_CONNECT_INSTANCE_ID=
AWS_CONNECT_CONTACT_FLOW_ID=
AWS_CONNECT_QUEUE_ID=
AWS_CONNECT_SOURCE_PHONE_NUMBER=
AWS_TRANSCRIPTS_QUEUE_URL=
AWS_EVENT_BUS_NAME=

# AWS media + speech
AWS_POLLY_VOICE_ID=Joanna
AWS_POLLY_OUTPUT_BUCKET=
AWS_POLLY_OUTPUT_PREFIX=tts/
AWS_MEDIA_BUCKET=
AWS_PINPOINT_APPLICATION_ID=
AWS_PINPOINT_ORIGINATION_NUMBER=
AWS_PINPOINT_REGION=us-east-1
AWS_TRANSCRIBE_LANGUAGE_CODE=en-US
AWS_TRANSCRIBE_VOCABULARY_FILTER_NAME=

# Vonage Voice/SMS (required when CALL_PROVIDER=vonage)
# Provide either the PEM contents (use \n escapes) or a path to the private key file
VONAGE_API_KEY=
VONAGE_API_SECRET=
VONAGE_APPLICATION_ID=
VONAGE_PRIVATE_KEY=
VONAGE_VOICE_FROM_NUMBER=
VONAGE_SMS_FROM_NUMBER=
VONAGE_ANSWER_URL=
VONAGE_EVENT_URL=

# Server configuration
PORT=3000
SERVER=
CORS_ORIGINS=

# OpenRouter AI configuration
OPENROUTER_API_KEY=
OPENROUTER_MODEL=meta-llama/llama-3.1-8b-instruct:free
YOUR_SITE_URL=http://localhost:3000
YOUR_SITE_NAME=Voice Call Bot

# Deepgram configuration
DEEPGRAM_API_KEY=
VOICE_MODEL=aura-asteria-en
DEEPGRAM_MODEL=nova-2

# Telegram webhook fallback
TELEGRAM_BOT_TOKEN=
TELEGRAM_ADMIN_CHAT_ID=

# Call recording
RECORDING_ENABLED=false

# Optional defaults
DEFAULT_SMS_BUSINESS_ID=
CONFIG_COMPLIANCE_MODE=safe
DTMF_ENCRYPTION_KEY=

# Inbound call defaults (optional)
INBOUND_PROMPT=
INBOUND_FIRST_MESSAGE=
# Optional pre-connect audio before stream starts
INBOUND_PRECONNECT_MESSAGE=
INBOUND_PRECONNECT_PAUSE_S=1
# Timeout to detect missing media after stream start (ms)
INBOUND_STREAM_FIRST_MEDIA_TIMEOUT_MS=8000
# Inbound rate limiting (0 disables)
INBOUND_RATE_LIMIT_MAX=0
INBOUND_RATE_LIMIT_WINDOW_S=60
INBOUND_RATE_LIMIT_SMS=false
INBOUND_RATE_LIMIT_CALLBACK=false
INBOUND_CALLBACK_DELAY_MIN=15
# JSON object mapping numbers to overrides, e.g. {"+15551234567":{"prompt":"...","first_message":"..."}}
INBOUND_NUMBER_ROUTES=

# Webhook retry backoff (ms + attempts)
WEBHOOK_RETRY_BASE_MS=5000
WEBHOOK_RETRY_MAX_MS=60000
WEBHOOK_RETRY_MAX_ATTEMPTS=5

# Provider failover (outbound)
PROVIDER_FAILOVER_ENABLED=true
PROVIDER_ERROR_THRESHOLD=3
PROVIDER_ERROR_WINDOW_S=120
PROVIDER_COOLDOWN_S=300

# Call job processor (durable queue)
CALL_JOB_PROCESSOR_INTERVAL_MS=5000
CALL_JOB_RETRY_BASE_MS=5000
CALL_JOB_RETRY_MAX_MS=60000
CALL_JOB_MAX_ATTEMPTS=3

# Call SLO thresholds
CALL_SLO_FIRST_MEDIA_MS=4000
CALL_SLO_ANSWER_DELAY_MS=12000
CALL_SLO_STT_FAILURES=3
